{"version":3,"file":"ContentComponent-Cx8AH_2E.js","sources":["../../../../../../../src/content/ContentComponent.tsx"],"sourcesContent":["import { Spinner } from \"@patternfly/react-core\";\nimport { Suspense, lazy, useMemo, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useEnvironment } from \"@keycloak/keycloak-ui-shared\";\nimport { MenuItem } from \"../root/PageNav\";\nimport { ContentComponentParams } from \"../routes\";\nimport { joinPath } from \"../utils/joinPath\";\nimport { usePromise } from \"../utils/usePromise\";\nimport fetchContentJson from \"./fetchContent\";\n\nfunction findComponent(\n  content: MenuItem[],\n  componentId: string,\n): string | undefined {\n  for (const item of content) {\n    if (\n      \"path\" in item &&\n      item.path.endsWith(componentId) &&\n      \"modulePath\" in item\n    ) {\n      return item.modulePath;\n    }\n    if (\"children\" in item) {\n      return findComponent(item.children, componentId);\n    }\n  }\n  return undefined;\n}\n\nexport const ContentComponent = () => {\n  const context = useEnvironment();\n\n  const [content, setContent] = useState<MenuItem[]>();\n  const { componentId } = useParams<ContentComponentParams>();\n\n  usePromise((signal) => fetchContentJson({ signal, context }), setContent);\n  const modulePath = useMemo(\n    () => findComponent(content || [], componentId!),\n    [content, componentId],\n  );\n\n  return modulePath && <Component modulePath={modulePath} />;\n};\n\ntype ComponentProps = {\n  modulePath: string;\n};\n\nconst Component = ({ modulePath }: ComponentProps) => {\n  const { environment } = useEnvironment();\n\n  const Element = lazy(\n    () => import(joinPath(environment.resourceUrl, modulePath)),\n  );\n  return (\n    <Suspense fallback={<Spinner />}>\n      <Element />\n    </Suspense>\n  );\n};\n\nexport default ContentComponent;\n"],"names":["findComponent","content","componentId","item","ContentComponent","context","useEnvironment","setContent","useState","useParams","usePromise","signal","fetchContentJson","modulePath","useMemo","jsx","Component","environment","Element","lazy","joinPath","Suspense","Spinner"],"mappings":"6MAUA,SAASA,EACPC,EACAC,EACoB,CACpB,UAAWC,KAAQF,EAAS,CAC1B,GACE,SAAUE,GACVA,EAAK,KAAK,SAASD,CAAW,GAC9B,eAAgBC,EAEhB,OAAOA,EAAK,WAEd,GAAI,aAAcA,EAChB,OAAOH,EAAcG,EAAK,SAAUD,CAAW,CAEnD,CAEF,CAEO,MAAME,EAAmB,IAAM,CACpC,MAAMC,EAAUC,EAAA,EAEV,CAACL,EAASM,CAAU,EAAIC,EAAA,EACxB,CAAE,YAAAN,CAAA,EAAgBO,EAAA,EAExBC,EAAYC,GAAWC,EAAiB,CAAE,OAAAD,EAAQ,QAAAN,CAAA,CAAS,EAAGE,CAAU,EACxE,MAAMM,EAAaC,EACjB,IAAMd,EAAcC,GAAW,CAAA,EAAIC,CAAY,EAC/C,CAACD,EAASC,CAAW,CAAA,EAGvB,OAAOW,GAAcE,EAACC,EAAA,CAAU,WAAAH,CAAA,CAAwB,CAC1D,EAMMG,EAAY,CAAC,CAAE,WAAAH,KAAiC,CACpD,KAAM,CAAE,YAAAI,CAAA,EAAgBX,EAAA,EAElBY,EAAUC,EACd,IAAM,OAAOC,EAASH,EAAY,YAAaJ,CAAU,EAAA,EAE3D,OACEE,EAACM,GAAS,SAAUN,EAACO,IAAQ,EAC3B,SAAAP,EAACG,IAAQ,CAAA,CACX,CAEJ"}